<!DOCTYPE html>
<html xmln:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/style/admin.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/latest/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script>
        $(function () {

            $(".search-bar input")
                .focus(function () {
                    $(".header").addClass("wide");
                })
                .blur(function () {
                    $(".header").removeClass("wide");
                });
                
            $(document).ready(function(){
				
				$("#class").click(function (e) {
			        e.preventDefault();
			        $(".submenu").slideToggle();
		        });
		        
		        var keyword = "${keyword != null ? keyword : sessionKeyword}";
        		$("#searchKeyword").val(keyword);
	
        	});    

            $(".cldetail").click(function () {
                $("#myModal").fadeIn();
            });

            $(".btnUpdate").click(function () {
                $("#myModal").fadeOut();
            });

            $(".btnDelete").click(function () {
                $("#myModal").fadeOut();
            });

            $(".btnClose").click(function () {
                $("#myModal").fadeOut();
            });

			
			function deleteClass(clno){
				var re = confirm("삭제하시겠습니까?");
				if(re == true){
					location.href = "deleteClass?clno="+clno;
				}
			}

        });


    </script>

</head>

<body style="background-color:black">
    <div class="container-scroller">
        <!-- 사이드바 -->
		<nav id="sidebar-all">
            <ul class="sidebar">
                <li class="sidebar-user">
                    Ketchby
                </li>
                <li><a href="/admin/dashboard" id="dashboard">📊 Dashboard</a></li>
                <li><a href="/admin/user" id="user">👤 사용자 관리</a></li>
                <li><a href="/admin/qanda" id="qanda">📧 문의 관리</a></li>
                <li><a href="/admin/notification" id="notification">📢 공지사항 관리</a></li>
				<li class="has-submenu">
				    <a href="#" id="class">📑 클래스 관리</a>
				    <ul class="submenu">
				        <li><a href="/admin/class">기존 클래스</a></li>
				        <li><a href="/admin/class">승인 요청된 클래스</a></li>
				    </ul>
				</li>                
				<li><a href="/admin/community" id="community">🧾 커뮤니티 관리</a></li>
            </ul>
        </nav>        
        
        <div id="page" class="page">
            <!-- 본문 헤더-->
            <div id="page-header">

            </div>
            <div class="main-wrapper" id="main-wrapper">
                <div class="main-table">
                    <h2>클래스</h2>
                    <p>요청된 클래스:63 </p>
							<!--변경 해야할 내역-->
							<div id="search5back">
	                            <form method="get" action="/admin/class" id="searchbox5">
									<select name="searchColumn" id="searchColumn">
										<option value="all">전체</option>
										<option value="clno">클래스 번호</option>
										<option value="cltitle">클래스명</option>
										<option value="cllevel">클래스 레벨</option>
										<option value="aid">클래스 개설자</option>
									</select>
	                                <input type="search" name="keyword" id="keyword" />
	                            </form>
                        	</div>
                        <table class="table table-dark table-hover">
                            <thead>
                                <tr>
                                    <th>클래스 번호</th>
                                    <th>클래스명</th>
                                    <th>클래스 레벨</th>
                                    <th>클래스 개설자</th>
                                    <th>

                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="c : ${listClass}">
                                    <td th:text="${c.clno}"></td>
                                    <td>
                                        <a href="#" class="cldetail" th:text="${c.cltitle}"></a>
                                    </td>
                                    <td th:text="${c.cllevel}"></td>
                                    <td th:text="${c.aid}"></td>
                                    <td>
										<a href="#" th:onclick="'deleteClass('+${c.clno}+')'">삭제</a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="pagingNumber">
				            <th:block th:each="i : ${#numbers.sequence(1, totalPage)}">
							    <a th:href="@{/admin/class(pageNo=${i}, keyword=${keyword != null ? keyword : sessionKeyword}, searchColumn=${searchColumn != null ? searchColumn : sessionSearchColumn})}" th:text="${i}"></a>  
							</th:block>
						</div>
               </div>
            </div>
        </div>
    </div>
    
    <!-- Modal 시작 -->
<div class="modal" id="myModal">
    <div class="modal-wrapper">
        <div class="modal-content">

            <!-- Modal 헤더 -->
            <div class="modal-header">
                <h4 class="modal-title"></h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <form>
                <div class="modal-body">
                    <div class="modal-row">
                        <div class="card-body">
		                  <div class="d-flex flex-column align-items-center text-center">
		                    <img src="/style/image21.png" alt="Admin" width="150">
		                    <div class="mt-3">
		                      <h4>John Doe</h4>
		                      <p class="text-secondary mb-1">Full Stack Developer</p>
		                      <p class="text-muted font-size-sm">Bay Area, San Francisco, CA</p>
		                      <button class="btn btn-primary">Follow</button>
		                      <button class="btn btn-outline-primary">Message</button>
		                    </div>
		                  </div>
		                </div>
                        <div class="col-md-8">
                            <!-- 클래스 번호 -->
                            <div class="modal-form">
                                <label for="clno">클래스 번호</label>
                                <input type="text" class="modal-input" id="clno" name="clno">
                            </div>
                            <!-- 클래스 명 -->
                            <div class="modal-form">
                                <label for="cltitle">클래스 명</label>
                                <input type="text" class="modal-input" id="cltitle" name="cltitle">
                            </div>
                            <!-- 클래스 레벨 -->
                            <div class="modal-form">
                                <label for="cllevel">클래스 레벨</label>
                                <input type="text" class="modal-input" id="cllevel" name="cllevel">
                            </div>
                        </div>
                    </div>
                    <!-- 클래스 소개 -->
                    <div class="modal-form">
                        <label for="clcontent">클래스 소개</label>
                        <textarea class="modal-input" id="clcontent" name="clcontent" rows="4"></textarea>
                    </div>
                    <div class="modal-row">
                        <div class="col-md-2">
                            <!-- 클래스 시작 날짜 -->
                            <div class="modal-form">
                                <label for="clsdate">클래스 기간</label>
                                <input type="text" class="modal-input" id="clsdate" name="clsdate">~
                                <input type="text" class="modal-input" id="cledate" name="cledate">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <!-- 추가 입력 필드 -->
                            <!-- ... -->
                        </div>
                    </div>
                </div>
            </form>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn_alert btnUpdate" data-bs-dismiss="modal">수정</button>
                <button type="button" class="btn_alert btnDelete" data-bs-dismiss="modal">삭제</button>
                <button type="button" class="btn_alert btnClose" data-bs-dismiss="modal">닫기</button>
            </div>

        </div>
    </div>
</div>
</body>
</html>