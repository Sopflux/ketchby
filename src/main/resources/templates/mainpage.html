<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Ketchby</title>
<link href="/style/mainpage.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="//code.jquery.com/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery.min.js"></script>
<script th:src="@{https://code.jquery.com/jquery-3.7.0.min.js}" type="text/javascript"></script>
<script>
  $(document).ready(function() {
    const $slider = $('.slider');
    const $slides = $('.slide');
    const $prevBtn = $('#prevBtn');
    const $nextBtn = $('#nextBtn');
    let isMoving = false;
    let currentIndex = 0;

    function moveSlide(index) {
      if (isMoving) return;
      isMoving = true;

      slider.css('transform', `translateX(-${index * 100}%)`);
      currentIndex = index;

      setTimeout(() => {
        isMoving = false;
      }, 500);
    }

    setInterval(() => {
      const nextIndex = (currentIndex + 1) % slider.children().length;
      moveSlide(nextIndex);
    }, 3000);
    
    
    // 이전 버튼 클릭 시 이벤트
    $prevBtn.click(function () {
      currentIndex = (currentIndex - 1 + $slides.length) % $slides.length;
      updateSlider();
    });

    // 다음 버튼 클릭 시 이벤트
    $nextBtn.click(function () {
      currentIndex = (currentIndex + 1) % $slides.length;
      updateSlider();
    });

    // 슬라이더 업데이트 함수
    function updateSlider() {
      $slider.css('transform', `translateX(-${currentIndex * 100}%)`);
    }
    
  });
</script>

</head>
<body>

<!-- 배너 -->
<div class="slider-container">
  <button id="prevBtn" class="slider-btn">
  <img th:src="@{/class/prev.png}" alt="Previous" />
  </button>
  <div class="slider">
    <div class="slide" style="background-image: url('class/banner1.jpg');"></div>
	<div class="slide" style="background-image: url('class/banner2.jpg');"></div>
	<div class="slide" style="background-image: url('class/banner3.jpg');"></div>
	<div class="slide" style="background-image: url('class/banner4.jpg');"></div>
  </div>
  <button id="nextBtn" class="slider-btn">
    <img th:src="@{/class/next.png}" alt="Next" />
  </button>
</div>


<!-- 카테고리 -->
<ul class="main-category">
  <li class="category-item">
    <a href="#" title="cooking icons">
      <div class="category-icon">
        <img th:src="@{/class/cooking.png}" />
        <p>요리/공예</p>
      </div>
    </a>
  </li>
  <li class="category-item">
    <a href="#" title="languages icons">
      <div class="category-icon">
        <img th:src="@{/class/language.png}" />
        <p>외국어</p>
      </div>
    </a>
  </li>
  <li class="category-item">
    <a href="#" title="ball icons">
      <div class="category-icon">
        <img th:src="@{/class/sports.png}" />
        <p>스포츠</p>
      </div>
    </a>
  </li>
  <li class="category-item">
    <a href="#" title="music note icons">
      <div class="category-icon">
        <img th:src="@{/class/music.png}" />
        <p>음악</p>
      </div>
    </a>
  </li>
  <li class="category-item">
    <a href="#" title="art icons">
      <div class="category-icon">
        <img th:src="@{/class/art.png}" />
        <p>미술</p>
      </div>
    </a>
  </li>
</ul>


<!-- 추천 클래스 출력 -->
<div class="container" id="section1">
    <div class="title-container">
        <h2 class="title">추천 클래스</h2>
    </div>
    <div class="cards-container">
		<button id="prevBtn" class="slider-btn">
		  <img th:src="@{/class/prev.png}" alt="Previous" />
		</button>
        <th:block th:each="m : ${recClassList}">
            <div class="card">
				 <img th:src="@{/class/${m.climg}.jpg}" />
                <div class="card-body">
                    <h4 class="card-category" th:text="${m.bcaname + ' > ' + m.scaname}"></h4>
                    <p class="card-addr" th:text="${m.claddr}"></p>
                    <a th:href="@{'classdetail.do?cl_no='+${m.clno}}" class="card-title" th:text="${m.cltitle}"></a>
                    <div class="btn">
                        <button class="btn_a_level" th:text="${m.level_}"></button>
                        <button class="btn_cl_level" th:text="${m.cllevel}"></button>
                    </div>
                </div>
            </div>
        </th:block>
        <button id="nextBtn" class="slider-btn">
		   <img th:src="@{/class/next.png}" alt="Next" />
		</button>
    </div>
</div>


<!-- 인기 클래스 출력 -->
<div class="container" id="section2">
    <div class="title-container">
        <h2 class="title">인기 클래스 TOP7</h2>
        <div class="carousel-controls">
            <button class="carousel-prev-btn" type="button"><</button>
            <button class="carousel-next-btn" type="button">></button>
        </div>
    </div>
    <div class="cards-container">
        <div class="card-carousel">
            <div class="card" th:each="n : ${hotClassList}">
         	<!-- 이미지 -->
                <div class="card-body">
                    <h4 class="card-category" th:text="${n.bcaname + ' > ' + n.scaname}"></h4>
                    <p class="card-text" th:text="${n.claddr}"></p>
                    <a th:href="@{'classdetail.do?cl_no=' + ${n.clno}}" class="card-title" th:text="${n.cltitle}"></a>
                    <div class="btn">
                        <button class="btn_a_level" th:text="${n.level_}"></button>
                        <button class="btn_cl_level" th:text="${n.cllevel}"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 요즘 뜨는 소모임 출력 -->
<div class="container" id="section3">
  <div class="title-container">
    <h2 class="title">요즘 뜨는 소모임</h2>
  </div>
  <div class="cards-container">
    <div class="card-carousel">
      <div th:each="h : ${hotClubList}">
        <div class="card" style="width:400px">
          <h3 class="card-category" th:text="${h.bcaname + ' > ' + h.scaname}"></h3>
          <p th:text="${h.cbclsdate}"></p>
          <div class="card-info">
            <div class="card-text">
              <a th:href="@{'clubdetail.do?cb_no=' + ${h.cbno}}" class="card-title" th:text="${h.cbtitle}"></a>
            </div>
            <!-- 이미지 -->
          </div>
          <div class="card-buttons">
            <div class="card-button">
              <span class="card-button-label">모집:</span>
              <span class="card-button-value" th:text="${h.cbpeople} + ' / ' + ${h.cbpeople}"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 커뮤니티 인기 게시물 출력 -->
<div class="container" id="section4">
  <div class="title-container">
    <h2 class="title">커뮤니티 인기 게시물</h2>
    <div class="carousel-controls">
      <button class="carousel-prev-btn" type="button">&lt;</button>
      <button class="carousel-next-btn" type="button">&gt;</button>
    </div>
  </div>
  <div class="cards-container">
    <div class="card-carousel">
      <div th:each="b : ${hotBoardList}">
        <div class="card" style="width:600px">
          <div class="card-body">
            <p class="card-text" th:text="${b.bdate}"></p>
            <a href="#" class="card-title" th:text="${b.btitle}"></a>
            <p th:text="${b.bcontent}"></p>
            <div class="btn">
              <button class="btn_a_level" th:text="${b.nick}"></button>
              <button class="btn_cl_level" th:text="${b.bcaname}"></button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
</nav>
</body>
</html>